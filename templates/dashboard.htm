<!doctype html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/20_palonek/przewodnik//static/style.css">
    <link rel="shortcut icon" href="/20_palonek/przewodnik/static/images/motyl.svg">
    <title>Przewodnik po świecie ciszy - użytkownik</title>
</head>
<body>

<!-- nawigacja -->
    <nav class="navbar navbar-expand-lg bg-dark navbar-dark py-3">
        <div class="container">
            <a href="/20_palonek/przewodnik/" class="navbar-brand"><i class="bi bi-house h3 px-2"></i> Przewodnik po świecie ciszy</a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navmenu">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navmenu">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a href="/20_palonek/przewodnik/kultura" class="nav-link">Kultura Głuchych</a>
                    </li>
                    <li class="nav-item">
                        <a href="/20_palonek/przewodnik/daktylografia" class="nav-link">Daktylografia</a>
                    </li>
                    <li class="nav-item">
                        <a href="/20_palonek/przewodnik/o_serwisie" class="nav-link">O serwisie</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- nagłówek -->
    <section class="bg-dark text-light p-5 text-center text-sm-start">
        <div class="container">
            <div class="d-sm-flex">
                <div class="mx-4">
                    <div class="container">
                        <div class="card bg-info text-light">
                            <div class="card-header">Cześć {{ current_user.name }}!
                            </div>
                            <div class="card-body">
                                <h5 class="card-title">Dane użytkownika:</h5>
                                <p class="card-text">
                                    <strong>Imię: </strong>{{ current_user.name }}<br>
                                    <strong>Nick: </strong>{{ current_user.nick }}<br>
                                    <strong>Data dołączenia: </strong>{{ current_user.date_added.strftime("%d-%m-%Y") }}<br>
                                </p>
                            </div>
                        </div>
                        <br>
                        <a href="{{ url_for('logout') }}" class="btn btn-secondary mx-2">Wyloguj</a>
                        <a href="{{ url_for('update', id=current_user.id) }}" class="btn btn-warning mx-2"> Edytuj</a>
                        <a href="{{ url_for('delete', id=current_user.id) }}" class="btn btn-danger mx-2" onclick="return confirmDelete();">Usuń</a>

                    </div>
                </div>
                <img id="motyl" class="img-fluid w-25" src="/20_palonek/przewodnik/static/images/motyl.svg" alt="Logo motyla w kolorach białym i turkusowym">
            </div>
        </div>
    </section>

    <!-- podstrony -->
    <section class=" p-5 bg-turquoise">
        <div class="container">
            {% for message in get_flashed_messages() %}
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}

            <!-- quiz -->
        <h3 class="mt-5">Wyniki "Quiz":</h3>
	        <br/>
        {% if current_user.quiz_score == 0 %}
             <p class="lead">Nie masz jeszcze wyników w tej kategorii. <a href="{{ url_for('question', id=1) }}" class="btn btn-my_default">Zagraj</a></p>
        {% else %}
           <strong>Wynik: </strong> {{ current_user.quiz_score }}/{{ max_score }}
        {% endif %}
        <br><hr>

            <!-- zdjęcia -->
            <h3 class="mt-5">Wyniki "Odczytywanie słów ze zdjęć":</h3>
	        <br/>
        {% if ps %}
            <table class="table table-hover table-bordered table-striped">
            {% for photo_score in photo_scores %}
                <tr>
                <td>{{ photo_score.id }}
                </td>
                <td>
                    {% for word in all_words %}
                        {% if word.id == photo_score.word_id %}
                            {{ word.word_text }}
                        {% endif %}
                    {% endfor %}
                </td>
                <td>{% if photo_score.score == 1 %}
                    <i class="bi bi-check-circle"></i>
                    {% else %}
                    <i class="bi bi-x-circle"></i>
                    {% endif %}
                </td>
                </tr>
            {% endfor %}
                <tr>
                    <td colspan="2"><strong>Wynik</strong></td>
                    <td>{{ photo_user_points }}/{{ photo_max_points }}</td>
                </tr>
            </table>
        {% else %}
            <p class="lead">Nie masz jeszcze wyników w tej kategorii. <a href="{{ url_for('word_photos_start') }}" class="btn btn-my_default">Zagraj</a></p>

        {% endif %}
        <br><hr>


        <!-- nagrania -->
        <h3 class="mt-5">Wyniki "Odczytywanie słów z nagrań":</h3>
	        <br/>
        {% if vs %}
            <table class="table table-hover table-bordered table-striped">
            {% for video_score in video_scores %}
                <tr>
                <td>{{ video_score.id }}
                </td>
                <td>
                    {% for word in all_words %}
                        {% if word.id == video_score.word_id %}
                            {{ word.word_text }}
                        {% endif %}
                    {% endfor %}
                </td>
                <td>{% if video_score.score == 1 %}
                    <i class="bi bi-check-circle"></i>
                    {% else %}
                    <i class="bi bi-x-circle"></i>
                    {% endif %}
                </td>
                </tr>
            {% endfor %}
                <tr>
                    <td colspan="2"><strong>Wynik</strong></td>
                    <td>{{ video_user_points }}/{{ video_max_points }}</td>
                </tr>
            </table>
        {% else %}
            <p class="lead">Nie masz jeszcze wyników w tej kategorii. <a href="{{ url_for('word_videos_start') }}" class="btn btn-my_default">Zagraj</a></p>

        {% endif %}
        </div>
    </section>

    <!-- footer -->
    <footer class="p-2 bg-white text-center text-dark position-relative">
        <div class="container">
            <p class="lead">Pola Palonek &copy; 2023</p>
            <a href="#" class="position-absolute bottom-0 end-0 p-3">
                <i class="bi bi-arrow-up-circle h3 text-dark"></i>
            </a>
        </div>
    </footer>

    <script>
        function confirmDelete() {
            return confirm('Czy na pewno chcesz usunąć konto? Tej operacji nie można cofnąć.');
        }
    </script>
    <script src="https://code.jquery.com/jquery-3.6.4.js" integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>

</body>
</html>
